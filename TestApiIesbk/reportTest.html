<!DOCTYPE html><html lang="en" xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="reportTest_files/styleReport.css">
    <title>Отчет о тестировании</title>
</head>
<body>
    <div class="menuWrapper">
        <ul class="listMenu"><li onclick="clickTab('table1', this)" class="activeItemMenu">Иркутскэнергосбыт</li><li onclick="clickTab('table2', this)" class="itemMenu">Волгоэнергосбыт</li></ul>
    </div>
    <div class="wrapperTable">
    <table id="table1" class="tableReport" style="display:block"><tr><th width="5%">№</th><th width="12%">Метод</th><th width="8%">Результат</th><th width="11%">Проверка</th><th width="10%">Время</th><th width="20%">Сообщение</th><th width="24%">Тестовые данные</th><th width="10%">Скриншот</th></tr><tbody><tr><td>2</td><td>CheckBalanceUserFLAPI</td><td style="color:green;">Passed</td><td><input type="radio" class="customCheckbox Yes" id="checkboxYes21" name="checkbox21" value="false"><label for="checkboxYes21">Да</label><input type="radio" class="customCheckbox No" id="checkboxNo21" name="checkbox21" value="false"><label for="checkboxNo21">Нет</label></td><td>9,1717819 сек.</td><td>Проверка на соответствие баланса пользователя ФЛ от АПИ с тестовыми данными.</td><td>{"urlApi":"https://api-lkpl-iesbk.dev.enplus.digital/api/","urlSite":"https://sbyt-irkutskenergo.dev.enplus.digital/","type":"fl","tech_login":"Misha","tech_password":"111111111","testsettings":{"login":"10103005224","authenticator":"\u0411\u0443\u0445\u0430\u0440\u043E\u0432\u0430","password":"111111111","balance":"12663,44","device_id":"60909dbb-57c5-11e7-80d4-002481f90c3a"}}</td><td>-</td></tr><tr><td>8</td><td>CheckBalanceUserFromTechFLAPI</td><td style="color:green;">Passed</td><td><input type="radio" class="customCheckbox Yes" id="checkboxYes81" name="checkbox81" value="false"><label for="checkboxYes81">Да</label><input type="radio" class="customCheckbox No" id="checkboxNo81" name="checkbox81" value="false"><label for="checkboxNo81">Нет</label></td><td>2,0959536 сек.</td><td>Проверка на соответствие тестовых данных и API данных баланса пользователя ФЛ, авторизированного из под ЛК техподдержки с помощью 'ЛК ФЛ (Служба поддержки)'</td><td>{"urlApi":"https://api-lkpl-iesbk.dev.enplus.digital/api/","urlSite":"https://sbyt-irkutskenergo.dev.enplus.digital/","type":"fl","tech_login":"Misha","tech_password":"111111111","testsettings":{"login":"10103005224","authenticator":"\u0411\u0443\u0445\u0430\u0440\u043E\u0432\u0430","password":"111111111","balance":"12663,44","device_id":"60909dbb-57c5-11e7-80d4-002481f90c3a"}}</td><td>-</td></tr><tr><td>3</td><td>CheckIdDeviceFLAPI</td><td style="color:green;">Passed</td><td><input type="radio" class="customCheckbox Yes" id="checkboxYes31" name="checkbox31" value="false"><label for="checkboxYes31">Да</label><input type="radio" class="customCheckbox No" id="checkboxNo31" name="checkbox31" value="false"><label for="checkboxNo31">Нет</label></td><td>0,5971403 сек.</td><td>Проверка на соответствие id прибора учета пользователя ФЛ от АПИ с тестовыми данными.</td><td>{"urlApi":"https://api-lkpl-iesbk.dev.enplus.digital/api/","urlSite":"https://sbyt-irkutskenergo.dev.enplus.digital/","type":"fl","tech_login":"Misha","tech_password":"111111111","testsettings":{"login":"10103005224","authenticator":"\u0411\u0443\u0445\u0430\u0440\u043E\u0432\u0430","password":"111111111","balance":"12663,44","device_id":"60909dbb-57c5-11e7-80d4-002481f90c3a"}}</td><td>-</td></tr><tr><td>9</td><td>CheckIdDeviceFromTechFLAPI</td><td style="color:green;">Passed</td><td><input type="radio" class="customCheckbox Yes" id="checkboxYes91" name="checkbox91" value="false"><label for="checkboxYes91">Да</label><input type="radio" class="customCheckbox No" id="checkboxNo91" name="checkbox91" value="false"><label for="checkboxNo91">Нет</label></td><td>0,8494921 сек.</td><td>Проверка на соответствие тестовых данных и API данных id прибора учета пользователя ФЛ, авторизированного из под ЛК техподдержки с помощью 'ЛК ФЛ (Служба поддержки)'</td><td>{"urlApi":"https://api-lkpl-iesbk.dev.enplus.digital/api/","urlSite":"https://sbyt-irkutskenergo.dev.enplus.digital/","type":"fl","tech_login":"Misha","tech_password":"111111111","testsettings":{"login":"10103005224","authenticator":"\u0411\u0443\u0445\u0430\u0440\u043E\u0432\u0430","password":"111111111","balance":"12663,44","device_id":"60909dbb-57c5-11e7-80d4-002481f90c3a"}}</td><td>-</td></tr><tr><td>1</td><td>LoginFlAPI</td><td style="color:green;">Passed</td><td><input type="radio" class="customCheckbox Yes" id="checkboxYes11" name="checkbox11" value="false"><label for="checkboxYes11">Да</label><input type="radio" class="customCheckbox No" id="checkboxNo11" name="checkbox11" value="false"><label for="checkboxNo11">Нет</label></td><td>0,303147 сек.</td><td>Вход пользователя в личный кабинет ФЛ API.</td><td>{"urlApi":"https://api-lkpl-iesbk.dev.enplus.digital/api/","urlSite":"https://sbyt-irkutskenergo.dev.enplus.digital/","type":"fl","tech_login":"Misha","tech_password":"111111111","testsettings":{"login":"10103005224","authenticator":"\u0411\u0443\u0445\u0430\u0440\u043E\u0432\u0430","password":"111111111","balance":"12663,44","device_id":"60909dbb-57c5-11e7-80d4-002481f90c3a"}}</td><td>-</td></tr><tr><td>4</td><td>LoginFlFront</td><td style="color:green;">Passed</td><td><input type="radio" class="customCheckbox Yes" id="checkboxYes41" name="checkbox41" value="false"><label for="checkboxYes41">Да</label><input type="radio" class="customCheckbox No" id="checkboxNo41" name="checkbox41" value="false"><label for="checkboxNo41">Нет</label></td><td>9,0051606 сек.</td><td>Вход пользователя в ЛК ФЛ FRONT.</td><td>{"urlApi":"https://api-lkpl-iesbk.dev.enplus.digital/api/","urlSite":"https://sbyt-irkutskenergo.dev.enplus.digital/","type":"fl","tech_login":"Misha","tech_password":"111111111","testsettings":{"login":"10103005224","authenticator":"\u0411\u0443\u0445\u0430\u0440\u043E\u0432\u0430","password":"111111111","balance":"12663,44","device_id":"60909dbb-57c5-11e7-80d4-002481f90c3a"}}</td><td>-</td></tr><tr><td>6</td><td>LoginTechAPI</td><td style="color:green;">Passed</td><td><input type="radio" class="customCheckbox Yes" id="checkboxYes61" name="checkbox61" value="false"><label for="checkboxYes61">Да</label><input type="radio" class="customCheckbox No" id="checkboxNo61" name="checkbox61" value="false"><label for="checkboxNo61">Нет</label></td><td>0,20552 сек.</td><td>Вход техподдержки в личный кабинет ФЛ API.</td><td>{"urlApi":"https://api-lkpl-iesbk.dev.enplus.digital/api/","urlSite":"https://sbyt-irkutskenergo.dev.enplus.digital/","type":"fl","tech_login":"Misha","tech_password":"111111111","testsettings":{"login":"10103005224","authenticator":"\u0411\u0443\u0445\u0430\u0440\u043E\u0432\u0430","password":"111111111","balance":"12663,44","device_id":"60909dbb-57c5-11e7-80d4-002481f90c3a"}}</td><td>-</td></tr><tr><td>5</td><td>LoginTechFlFront</td><td style="color:green;">Passed</td><td><input type="radio" class="customCheckbox Yes" id="checkboxYes51" name="checkbox51" value="false"><label for="checkboxYes51">Да</label><input type="radio" class="customCheckbox No" id="checkboxNo51" name="checkbox51" value="false"><label for="checkboxNo51">Нет</label></td><td>4,6885621 сек.</td><td>Вход техподдержки в ЛК ФЛ FRONT.</td><td>{"urlApi":"https://api-lkpl-iesbk.dev.enplus.digital/api/","urlSite":"https://sbyt-irkutskenergo.dev.enplus.digital/","type":"fl","tech_login":"Misha","tech_password":"111111111","testsettings":{"login":"10103005224","authenticator":"\u0411\u0443\u0445\u0430\u0440\u043E\u0432\u0430","password":"111111111","balance":"12663,44","device_id":"60909dbb-57c5-11e7-80d4-002481f90c3a"}}</td><td>-</td></tr><tr><td>7</td><td>LoginUserFromTechAPI</td><td style="color:green;">Passed</td><td><input type="radio" class="customCheckbox Yes" id="checkboxYes71" name="checkbox71" value="false"><label for="checkboxYes71">Да</label><input type="radio" class="customCheckbox No" id="checkboxNo71" name="checkbox71" value="false"><label for="checkboxNo71">Нет</label></td><td>0,5458497 сек.</td><td>Вход пользователя в ЛК из под ЛК техподдержки API.</td><td>{"urlApi":"https://api-lkpl-iesbk.dev.enplus.digital/api/","urlSite":"https://sbyt-irkutskenergo.dev.enplus.digital/","type":"fl","tech_login":"Misha","tech_password":"111111111","testsettings":{"login":"10103005224","authenticator":"\u0411\u0443\u0445\u0430\u0440\u043E\u0432\u0430","password":"111111111","balance":"12663,44","device_id":"60909dbb-57c5-11e7-80d4-002481f90c3a"}}</td><td>-</td></tr></tbody></table>
    <table id="table2" class="tableReport" style="display:none"><tr><th width="5%">№</th><th width="12%">Метод</th><th width="8%">Результат</th><th width="11%">Проверка</th><th width="10%">Время</th><th width="20%">Сообщение</th><th width="24%">Тестовые данные</th><th width="10%">Скриншот</th></tr><tbody></tbody></table></div>
    <button onclick="confirmCheck()" class="bubbly-button">Подтвердить проверку</button>
    <div id="infoTest">
        
    <p>Всего тестов запущено: 9 | Успешно: 9 | Провалено: 0 | Процент пройденных 100% | Тестирование началось: 17.04.2024 13:13:44 : 159 | Тестирование завершено: 17.04.2024 13:14:11:649</p></div>
        <script>
        var countBadTest = 0;
        var countGoodTest = 0;
        var currentTable = document.getElementById("table1");

        //Реализация переклчючения по вкладкам
        function clickTab(idTable, element) { 
            let allReports = document.querySelectorAll('.tableReport');
            let allItemMenu = document.querySelectorAll('li');
            for (let report of allReports)
            {
                if (report.getAttribute("id") == idTable) {
                    currentTable = report;
                    report.setAttribute("style", "display: block");
                }
                else {
                    report.setAttribute("style", "display: none");
                }
            }
            for (let item of allItemMenu) {
                item.setAttribute("class", "itemMenu");
            }
            element.setAttribute("class", "activeItemMenu");
            
        }
        //Реализация переклчючения по вкладкам



        //Анимация кнопки подтвердить//
        var animateButton = function (e) {

            e.preventDefault;
            //reset animation
            e.target.classList.remove('animate');

            e.target.classList.add('animate');
            setTimeout(function () {
                e.target.classList.remove('animate');
            }, 700);
        };
        var bubblyButtons = document.getElementsByClassName("bubbly-button");
        for (var i = 0; i < bubblyButtons.length; i++) {
            bubblyButtons[i].addEventListener('click', animateButton, false);
        }
        //Анимация кнопки подтвердить//



        //Обработчик нажатия радиобаттонов//
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', () => {
                var nameRadio = radio.getAttribute('name');
                if (radio.getAttribute("class") == "customCheckbox Yes") {
                    radio.setAttribute("value", "checked");
                    document.querySelector(`[class="customCheckbox No"][name="${nameRadio}"]`).setAttribute("value", "false")
                }

                if (radio.getAttribute("class") == "customCheckbox No") {
                    radio.setAttribute("value", "checked");
                    radio
                    document.querySelector(`[class="customCheckbox Yes"][name="${nameRadio}"]`).setAttribute("value", "true")
                }
            });
        });
        //Обработчик нажатия радиобаттонов//



        //Обработчик нажатия на кнопку подтвердить проверку//
            function confirmCheck() {
                var trs = currentTable.querySelectorAll("tr");
                for (const tr of trs) {
                    var tds = tr.querySelectorAll("td");
                    for (const td of tds) {
                        var inputs = td.querySelectorAll('input');
                        for (const input of inputs) {
                            if (input.getAttribute("class") == "customCheckbox No" && input.getAttribute("value") == "checked") {
                                var newTd = document.createElement('td');
                                newTd.setAttribute("style", "color: red");
                                newTd.setAttribute("with", "8%");
                                newTd.appendChild(document.createTextNode("Failed"));
                                td.replaceWith(newTd);
                            }
                            if (input.getAttribute("class") == "customCheckbox Yes" && input.getAttribute("value") == "checked") {
                                var newTd = document.createElement('td');
                                newTd.setAttribute("style", "color: green");
                                newTd.setAttribute("with", "8%");
                                newTd.appendChild(document.createTextNode("Passed"));
                                td.after(newTd);
                                td.remove();
                            }
                        }
                    }
                } 
            }  
        //Обработчик нажатия на кнопку подтвердить проверку//



        //Перерасчет кол-ва пройденных тестов, всех тестов, неудачных тестов//
            function calculateInfoTest() {
                countBadTest = 0;
                countGoodTest = 0;
                for (const td of currentTable.children.querySelectorAll('td')){
                    if (td.textContent.includes("Failed")) {
                        countBadTest++;
                    }
                    if (td.textContent.includes("Passed")) {
                        countGoodTest++;
                    }
                }
                var countAllTest = countBadTest + countGoodTest;
                var percentSuccsess = countGoodTest / countAllTest * 100;
                var p = document.querySelector("[id='infoTest'] p").textContent;
                var allText = p.textContent.split("|");
                var newText = `Всего тестов запущено: ${countAllTest} | Успешно: ${countGoodTest} | Провалено: ${countBadTest} | Процент пройденных: ${percentSuccsess} | ${allText[4]} | ${allText[5]}`
                p.textContent = newText;
            }
        //Перерасчет кол-ва пройденных тестов, всех тестов, неудачных тестов//
    </script>
</body>

</html>
